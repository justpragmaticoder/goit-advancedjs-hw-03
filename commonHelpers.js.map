{"version":3,"file":"commonHelpers.js","sources":["../src/js/request-helper.js","../src/js/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://api.thecatapi.com/v1\";\nconst BREEDS_API_ENDPOINT = `${BASE_URL}/breeds`;\nconst IMAGES_API_ENDPOINT = `${BASE_URL}/images/search?`;\n\naxios.defaults.headers.common[\"x-api-key\"] = process.env.CAT_API_KEY;\n\nfunction fetchBreeds() {\n  return axios.get(`${BREEDS_API_ENDPOINT}`).then((response) => response.data);\n}\n\nfunction fetchCatByBreed(breedId) {\n  return axios\n    .get(`${IMAGES_API_ENDPOINT}breed_ids=${breedId}`)\n    .then((response) => response.data);\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import SlimSelect from \"slim-select\";\nimport \"slim-select/styles\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchBreeds, fetchCatByBreed } from \"./request-helper.js\";\n\nfunction toggleHiddenCompletely(element, isVisible) {\n  element.classList.toggle(\"is-hidden-compeletely\", !isVisible);\n}\n\nfunction selectorUpload(selector, loader, catDescription) {\n  fetchBreeds()\n    .then(function (breeds) {\n      selector.classList.remove(\"is-invisible\");\n      const slimSelector = breeds.map(\n        ({ id, name }) => `<option value=\"${id}\">${name}</option>`\n      );\n      selector.insertAdjacentHTML(\"afterbegin\", slimSelector.join(\"\"));\n      new SlimSelect({\n        select: selector,\n      });\n    })\n    .catch(function (error) {\n      handleError(error);\n    })\n    .finally(function () {\n      toggleHiddenCompletely(selector, true);\n      toggleHiddenCompletely(loader, false);\n      toggleHiddenCompletely(catDescription, true);\n    });\n}\n\nfunction createMarkup(event, selector, loader, catDescription) {\n  toggleHiddenCompletely(catDescription, false);\n  toggleHiddenCompletely(loader, true);\n  toggleHiddenCompletely(selector, true);\n\n  const breedId = event.currentTarget.value;\n\n  fetchCatByBreed(breedId)\n    .then(function (catData) {\n      if (catData.length === 0) {\n        catDescription.innerHTML = ``;\n      }\n      const { url, breeds } = catData[0];\n\n      catDescription.innerHTML = `\n        <img src=\"${url}\" alt=\"${breeds[0].name}\" width=\"400\" loading=\"lazy\" />\n        <div class=\"text-box\">\n          <h2>${breeds[0].name}</h2>\n          <p>${breeds[0].description}</p>\n          <p><b>Temperament: </b>${breeds[0].temperament}</p>\n          <p><b>Origin: </b>${breeds[0].origin}</p>\n        </div>`;\n    })\n    .catch(function (error) {\n      handleError(error);\n    })\n    .finally(function () {\n      toggleHiddenCompletely(loader, false);\n      toggleHiddenCompletely(selector, true);\n      toggleHiddenCompletely(catDescription, true);\n    });\n}\n\nfunction handleError(error) {\n  iziToast.error({\n    title: \"ðŸ”» Oops!\",\n    message: error.message ?? \"Something went wrong!\",\n    position: \"topCenter\",\n  });\n}\n\n(() => {\n  const selector = document.querySelector(\".breed-select\");\n  const loader = document.querySelector(\".loader\");\n  const catDescription = document.querySelector(\".cat-description\");\n\n  selector.addEventListener(\"change\", (event) =>\n    createMarkup(event, selector, loader, catDescription)\n  );\n  selectorUpload(selector, loader, catDescription);\n})();\n"],"names":["BASE_URL","BREEDS_API_ENDPOINT","IMAGES_API_ENDPOINT","axios","fetchBreeds","response","fetchCatByBreed","breedId","toggleHiddenCompletely","element","isVisible","selectorUpload","selector","loader","catDescription","breeds","slimSelector","id","name","SlimSelect","error","handleError","createMarkup","event","catData","url","iziToast"],"mappings":"owBAEA,MAAMA,EAAW,+BACXC,EAAsB,GAAGD,CAAQ,UACjCE,EAAsB,GAAGF,CAAQ,kBAEvCG,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAI,CAAA,EAAY,YAEzD,SAASC,GAAc,CACrB,OAAOD,EAAM,IAAI,GAAGF,CAAmB,EAAE,EAAE,KAAMI,GAAaA,EAAS,IAAI,CAC7E,CAEA,SAASC,EAAgBC,EAAS,CAChC,OAAOJ,EACJ,IAAI,GAAGD,CAAmB,aAAaK,CAAO,EAAE,EAChD,KAAMF,GAAaA,EAAS,IAAI,CACrC,CCVA,SAASG,EAAuBC,EAASC,EAAW,CAClDD,EAAQ,UAAU,OAAO,wBAAyB,CAACC,CAAS,CAC9D,CAEA,SAASC,EAAeC,EAAUC,EAAQC,EAAgB,CACxDV,EAAa,EACV,KAAK,SAAUW,EAAQ,CACtBH,EAAS,UAAU,OAAO,cAAc,EACxC,MAAMI,EAAeD,EAAO,IAC1B,CAAC,CAAE,GAAAE,EAAI,KAAAC,KAAW,kBAAkBD,CAAE,KAAKC,CAAI,WACvD,EACMN,EAAS,mBAAmB,aAAcI,EAAa,KAAK,EAAE,CAAC,EAC/D,IAAIG,EAAW,CACb,OAAQP,CAChB,CAAO,CACP,CAAK,EACA,MAAM,SAAUQ,EAAO,CACtBC,EAAYD,CAAK,CACvB,CAAK,EACA,QAAQ,UAAY,CACnBZ,EAAuBI,EAAU,EAAI,EACrCJ,EAAuBK,EAAQ,EAAK,EACpCL,EAAuBM,EAAgB,EAAI,CACjD,CAAK,CACL,CAEA,SAASQ,EAAaC,EAAOX,EAAUC,EAAQC,EAAgB,CAC7DN,EAAuBM,EAAgB,EAAK,EAC5CN,EAAuBK,EAAQ,EAAI,EACnCL,EAAuBI,EAAU,EAAI,EAErC,MAAML,EAAUgB,EAAM,cAAc,MAEpCjB,EAAgBC,CAAO,EACpB,KAAK,SAAUiB,EAAS,CACnBA,EAAQ,SAAW,IACrBV,EAAe,UAAY,IAE7B,KAAM,CAAE,IAAAW,EAAK,OAAAV,CAAQ,EAAGS,EAAQ,CAAC,EAEjCV,EAAe,UAAY;AAAA,oBACbW,CAAG,UAAUV,EAAO,CAAC,EAAE,IAAI;AAAA;AAAA,gBAE/BA,EAAO,CAAC,EAAE,IAAI;AAAA,eACfA,EAAO,CAAC,EAAE,WAAW;AAAA,mCACDA,EAAO,CAAC,EAAE,WAAW;AAAA,8BAC1BA,EAAO,CAAC,EAAE,MAAM;AAAA,eAE9C,CAAK,EACA,MAAM,SAAUK,EAAO,CACtBC,EAAYD,CAAK,CACvB,CAAK,EACA,QAAQ,UAAY,CACnBZ,EAAuBK,EAAQ,EAAK,EACpCL,EAAuBI,EAAU,EAAI,EACrCJ,EAAuBM,EAAgB,EAAI,CACjD,CAAK,CACL,CAEA,SAASO,EAAYD,EAAO,CAC1BM,EAAS,MAAM,CACb,MAAO,WACP,QAASN,EAAM,SAAW,wBAC1B,SAAU,WACd,CAAG,CACH,EAEC,IAAM,CACL,MAAMR,EAAW,SAAS,cAAc,eAAe,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,kBAAkB,EAEhEF,EAAS,iBAAiB,SAAWW,GACnCD,EAAaC,EAAOX,EAAUC,EAAQC,CAAc,CACxD,EACEH,EAAeC,EAAUC,EAAQC,CAAc,CACjD,GAAI"}